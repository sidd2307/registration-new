{"version":3,"sources":["../../src/routes/web.js"],"names":["router","express","Router","initWebRoutes","app","get","loginController","checkLoggedIn","homePageController","getHomePage","checkLoggedOut","getLoginPage","post","passport","authenticate","successRedirect","failureRedirect","successFlash","failureFlash","registerController","getRegisterPage","auth","validateRegister","createNewUser","postLogOut","use","module","exports"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AAEA;;;;AAEA;;;;AACA;;;;AACA;;;;;;AALA;AAOA,IAAIA,SAASC,kBAAQC,MAAR,EAAb;AALA;;;AAOA;;AAGA,IAAIC,gBAAgB,SAAhBA,aAAgB,CAACC,GAAD,EAAS;AACzB;AACAJ,WAAOK,GAAP,CAAW,GAAX,EAAgBC,0BAAgBC,aAAhC,EAA+CC,6BAAmBC,WAAlE;AACAT,WAAOK,GAAP,CAAW,QAAX,EAAqBC,0BAAgBI,cAArC,EAAqDJ,0BAAgBK,YAArE;AACA;AACAX,WAAOY,IAAP,CAAY,QAAZ,EAAsBC,mBAASC,YAAT,CAAsB,OAAtB,EAA+B;AACjDC,yBAAiB,GADgC;AAEjDC,yBAAiB,QAFgC;AAGjDC,sBAAc,IAHmC;AAIjDC,sBAAc;AAJmC,KAA/B,CAAtB;AAMAlB,WAAOK,GAAP,CAAW,WAAX,EAAwBc,6BAAmBC,eAA3C;AACApB,WAAOY,IAAP,CAAY,WAAZ,EAAyBS,yBAAKC,gBAA9B,EAAgDH,6BAAmBI,aAAnE;AACA;AACAvB,WAAOY,IAAP,CAAY,SAAZ,EAAuBN,0BAAgBkB,UAAvC;AACA,WAAOpB,IAAIqB,GAAJ,CAAQ,GAAR,EAAazB,MAAb,CAAP;AACH,CAhBD;AAiBA0B,OAAOC,OAAP,GAAiBxB,aAAjB","file":"web.js","sourcesContent":["import express from \"express\";\r\nimport loginController from \"../controllers/loginController\";\r\nimport registerController from \"../controllers/registerController\";\r\n// Changes Start\r\nimport homePageController from \"../controllers/homePageController\"\r\n// Changes End\r\nimport auth from \"../validation/authValidation\";\r\nimport passport from \"passport\"\r\nimport initPassportLocal from \"../controllers/passportLocalController\"\r\n\r\nlet router = express.Router();\r\n\r\ninitPassportLocal();\r\n\r\n\r\nlet initWebRoutes = (app) => {\r\n    // Changes Start\r\n    router.get(\"/\", loginController.checkLoggedIn, homePageController.getHomePage);\r\n    router.get(\"/login\", loginController.checkLoggedOut, loginController.getLoginPage)\r\n    // Changes End\r\n    router.post(\"/login\", passport.authenticate(\"local\", {\r\n        successRedirect: \"/\",\r\n        failureRedirect: \"/login\",\r\n        successFlash: true,\r\n        failureFlash: true\r\n    }));\r\n    router.get(\"/register\", registerController.getRegisterPage)\r\n    router.post(\"/register\", auth.validateRegister, registerController.createNewUser);\r\n    // Changes Start\r\n    router.post(\"/logout\", loginController.postLogOut)\r\n    return app.use(\"/\", router);\r\n};\r\nmodule.exports = initWebRoutes;\r\n"]}